modules:
-   name: I2C
    id: 5
    version: 0.0.1
    description: I2C Connectivity

    commands:
    -   name: capabilities
        command: 0
        description: I2C capabilities
        operation: get
        requestParams: null
        responseParams:
        -   label: C
            name: commandsSet
            description: which commands are enabled in the I2C module
            typeDefinition:
                '@type': commands
                bitFields: []
            required: yes
        -   label: N
            name: notificationsSupported
            description: whether notifications are supported
            typeDefinition:
                '@type': flag
            required: no
        -   label: P
            name: portCount
            description: how many ports are available
            typeDefinition:
                '@type': number
            required: yes
        -   label: F
            name: frequenciesSupported
            description: how many frequencies are supported
            typeDefinition:
                '@type': number
            required: yes
        status: null

    -   name: i2cSetup
        command: 1
        description: configures the I2C subsystem
        operation: put
        requestParams:
        -   label: P
            name: port
            description: 'which port to configure (default: all)'
            typeDefinition:
                '@type': number
            required: no
        -   label: F
            name: frequency
            description: the frequency to set
            typeDefinition:
                '@type': number
            required: no
        responseParams: null
        status:
        -   code: BAD_PARAM
            meaning: port or frequency out of range

    -   name: i2cSend
        command: 2
        description: Sends data to a specified I2C device
        operation: post
        requestParams:
        -   label: P
            name: port
            description: which port to send to
            typeDefinition:
                '@type': number
            required: yes
        -   label: A
            name: address
            description: which address to send to (0-127, or 0-1023 depending on mode)
            typeDefinition:
                '@type': number
            required: yes
        -   label: N
            name: tenBitMode
            description: 'indicates if 10-bit addressing (default: 7 bit)'
            typeDefinition:
                '@type': flag
            required: no
        -   label: T
            name: retries
            description: 'how many times to try the write operation (default: 5)'
            typeDefinition:
                '@type': number
            required: no
        -   label: +
            name: data
            description: the data to send
            typeDefinition:
                '@type': bytes
            required: no
        responseParams:
        -   label: A
            name: address
            description: the address the data was sent to
            typeDefinition:
                '@type': number
            required: yes
        -   label: I
            name: resultInfo
            description: detailed status info for I2C activity
            typeDefinition:
                '@type': enum
                values: [Ok, BufferOverrun, AddrNack, DataNack, Other ]
            required: yes
        -   label: T
            name: attempts
            description: how many attempts we made to send
            typeDefinition:
                '@type': number
            required: yes
        status:
        -   code: CMD_FAIL
            meaning: write failed in benign way
        -   code: CMD_ERROR
            meaning: write failed in bad way - serious error
            

    -   name: i2cReceive
        command: 3
        description: Receives data from a specified I2C device
        operation: post
        requestParams:
        -   label: P
            name: port
            description: which port to read from
            typeDefinition:
                '@type': number
            required: yes
        -   label: A
            name: address
            description: which address to read from (0-127, or 0-1023 depending on mode)
            typeDefinition:
                '@type': number
            required: yes
        -   label: N
            name: tenBitMode
            description: 'indicates if 10-bit addressing (default: 7 bit)'
            typeDefinition:
                '@type': flag
            required: no
        -   label: T
            name: retries
            description: 'how many times to try the read operation (default: 5)'
            typeDefinition:
                '@type': number
            required: no
        -   label: L
            name: length
            description: 'number of bytes to attempt to read (default: 0)'
            typeDefinition:
                '@type': number
            required: no
        responseParams:
        -   label: A
            name: address
            description: the device's address
            typeDefinition:
                '@type': number
            required: yes
        -   label: I
            name: resultInfo
            description: detailed status info for I2C activity
            typeDefinition:
                '@type': enum
                values: [Ok, BufferOverrun, AddrNack, DataNack, Other ]
            required: yes
        -   label: T
            name: attempts
            description: how many attempts we made to read
            typeDefinition:
                '@type': number
            required: yes
        -   label: +
            name: data
            description: the data that was read
            typeDefinition:
                '@type': bytes
            required: no
        status:
        -   code: TOO_BIG
            meaning: the length requested exceeded the buffer size
        -   code: CMD_FAIL
            meaning: write failed in benign way
        -   code: CMD_ERROR
            meaning: write failed in bad way - serious error
            
            
    -   name: i2cSendReceive
        command: 4
        description: Sends a message to a specified I2C device, then directly performs a receive
        operation: post
        requestParams:
        -   label: P
            name: port
            description: which port to send to/receive from
            typeDefinition:
                '@type': number
            required: yes
        -   label: A
            name: address
            description: which address to send to/receive from (0-127, or 0-1023 depending on mode)
            typeDefinition:
                '@type': number
            required: yes
        -   label: N
            name: tenBitMode
            description: 'indicates if 10-bit addressing (default: 7 bit)'
            typeDefinition:
                '@type': flag
            required: no
        -   label: T
            name: retries
            description: 'how many times to try the send/receive operation (default: 5)'
            typeDefinition:
                '@type': number
            required: no
        -   label: +
            name: data
            description: the data to send
            typeDefinition:
                '@type': bytes
            required: no
        -   label: L
            name: length
            description: 'number of bytes to attempt to read (default: 0)'
            typeDefinition:
                '@type': number
            required: no
        responseParams:
        -   label: A
            name: address
            description: the address the data was sent/received
            typeDefinition:
                '@type': number
            required: yes
        -   label: I
            name: resultInfo
            description: detailed status info for I2C activity
            typeDefinition:
                '@type': enum
                values: [Ok, BufferOverrun, AddrNack, DataNack, Other ]
            required: yes
        -   label: T
            name: attempts
            description: how many attempts we made to send/receive
            typeDefinition:
                '@type': number
            required: yes
        -   label: +
            name: data
            description: the data that was read
            typeDefinition:
                '@type': bytes
            required: no
        status:
        -   code: CMD_FAIL
            meaning: write failed in benign way
        -   code: CMD_ERROR
            meaning: write failed in bad way - serious error