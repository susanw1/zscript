modules:
-   name: Core
    id: 0
    version: 0.0.1
    description: Provides core system commands which can be executed without device activation

    commands:
    -   name: capabilities
        command: 0
        description: Top level identification, for hardware, software, modules, versions
        operation: get
        requestParams: 
        -   label: V
            name: versionType
            description: selects which ident/version info to return
            typeDefinition:
                '@type': enum
                allowedValues: [UserFirmware, CoreZcodeLanguage, PlatformFirmware, PlatformHardware]
            required: no
        responseParams:
        -   label: C
            name: commandsSet
            description: which commands are enabled in this module
            typeDefinition:
                '@type': commands
                bitFields: []
            required: yes
        -   label: M
            name: modulesBankSet
            description: which modules present in this bank (ie 00xx)
            typeDefinition:
                '@type': commands
                bitFields: []
            required: yes
        -   label: V
            name: version
            description: 2-byte version number relating to requested versionType
            typeDefinition:
                '@type': number
            required: yes
        -   label: +
            name: ident
            description: identification string relating to requested versionType
            typeDefinition:
                '@type': string
            required: yes
        status: []


    -   name: echo
        command: 1
        description: Echoes all request params to the response, for testing purposes
        operation: get
        requestParams:
        -   label: S
            name: status
            description: determines the returned Status param - can be any status
            typeDefinition:
                '@type': number
            required: no
        -   label: +
            name: bigField
            description: any supplied value will be returned
            typeDefinition:
                '@type': bytes
            required: no
        -   name: any
            description: any supplied value will be returned
            typeDefinition:
                '@type': number
            required: no
        responseParams:
        -   name: any
            description: any supplied value will be returned
            typeDefinition:
                '@type': number
            required: no
        -   label: S
            name: status
            description: 'the supplied Status param - can be any status; default: OK'
            typeDefinition:
                '@type': number
            required: yes


    -   name: activate
        command: 2
        description: Activates zcode system, allowing commands 0x10 onwards to be executed
        operation: put
        requestParams:
        -   label: K
            name: key
            description: must match the device's own key to allow activation
            typeDefinition:
                '@type': number
            required: no
        responseParams:
        -   label: A
            name: previousActivationState
            description: true if already activated; absent otherwise
            typeDefinition:
                '@type': flag
            required: no
        status:
        -   code: CMD_FAIL
            meaning: key match failure


    -   name: reset
        command: 3
        description: Resets the device(!) or channels. Device reset and *this channel* reset produces no response at all
        operation: put
        requestParams:
        -   label: C
            name: channel
            description: specifies channel to be reset
            typeDefinition:
                '@type': number
            required: no
        responseParams: []
        status:
        -   code: CMD_FAIL
            meaning: channel reset failed


    -   name: readGuid
        command: 4
        description: Retrieves the system GUID, if set
        operation: get
        requestParams: []
        responseParams:
        -   label: +
            name: guid
            description: the previously set system GUID
            typeDefinition:
                '@type': bytes
            required: yes
        status:
        -   code: CMD_FAIL
            meaning: no valid GUID set


    -   name: channelInfo
        command: 8
        description: Retrieves channel info
        operation: get
        requestParams:
        -   label: C
            name: channel
            description: 'which channel to configure (default: this channel)'
            typeDefinition:
                '@type': number
            required: no
        responseParams:
        -   label: B
            name: maxBigField
            description: maximum number of bytes that can be supplied in request's big-field
            typeDefinition:
                '@type': number
            required: yes
        -   label: F
            name: maxRequestParams
            description: maximum number of params that can be supplied in any request
            typeDefinition:
                '@type': number
            required: yes
        -   label: M
            name: associatedModule
            description: the module associated with this channel
            typeDefinition:
                '@type': number
            required: yes
        -   label: +
            name: name
            description: channel descriptor
            typeDefinition:
                '@type': text
            required: yes
        extension: channel
        status: []


    -   name: makeCode
        command: 12
        description: Generates a random match-code
        operation: post
        requestParams: []
        responseParams:
        -   label: C
            name: matchCode
            description: newly generated random match-code
            typeDefinition:
                '@type': number
            required: yes


    -   name: matchCode
        command: 13
        description: Returns OK only if supplied code matches the previously generated match-code
        operation: get
        requestParams:
        -   label: C
            name: matchCode
            description: a match-code to confirm against previously generated one
            typeDefinition:
                '@type': number
            required: yes
        responseParams: []
        status:
        -   code: CMD_FAIL
            meaning: supplied code didn't match


    -   name: user-defined
        command: 15
        description: Command kept free for user-defined system command
        operation: unknown
        requestParams: []
        responseParams: []
        status: []